(this["webpackJsonpcis4914-project"]=this["webpackJsonpcis4914-project"]||[]).push([[0],{302:function(e,t,a){e.exports=a(514)},309:function(e,t,a){},434:function(e,t,a){var n={"./ca-ES.json":435,"./de-DE.json":436,"./en-US.json":247,"./es-ES.json":437,"./fi-FI.json":438,"./fr-FR.json":439,"./he-IL.json":440,"./it-IT.json":441,"./ja-JP.json":442,"./no-NB.json":443,"./pl-PL.json":444,"./pt-BR.json":445,"./ru-RU.json":446,"./sv-SE.json":447,"./tr-TR.json":448,"./zh-CN.json":449};function r(e){var t=l(e);return a(t)}function l(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=l,e.exports=r,r.id=434},509:function(e,t){},510:function(e,t){},511:function(e,t){},514:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(85),s=a.n(l);a(307),a(308),a(309),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(22),c=a(23),i=a(24),u=a(25),m=a(26),d=a(40),p=a(79),h=r.a.createContext(null),f=function(e){return function(t){return r.a.createElement(h.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))}))}},v=h,E=a(9),g=a.n(E),b=a(69),w=a.n(b),x=(a(314),a(316),a(515),a(205),{apiKey:"AIzaSyCz5H3RlwJowAPSAXi9Lvcc2oyPmLBeuIg",authDomain:"cis4914-40936.firebaseapp.com",databaseURL:"https://cis4914-40936.firebaseio.com",projectId:"cis4914-40936",storageBucket:"cis4914-40936.appspot.com",messagingSenderId:"178831665685",appId:"1:178831665685:web:3ba1a1b03cdd45c57afc1c",measurementId:"G-FYCFPK2QDN"}),C=function(){function e(){var t=this;Object(o.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.doDeleteUser=function(){var e=t.auth.currentUser;console.log(e),t.auth.signOut(),e.delete().then((function(){console.log("User deleted.")})).catch((function(e){console.log("Error deleting user.")}))},this.getElementsInPath=function(e){var a,n,r,l,s=arguments;return g.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:null,n=[],r=t.db.ref(e),o.next=5,g.a.awrap(r.once("value"));case 5:return l=o.sent,null!=a?l.forEach((function(e){a.includes(e.key)&&n.push({uid:e.key,value:e.val()})})):l.forEach((function(e){n.push({uid:e.key,value:e.val()})})),o.abrupt("return",n);case 8:case"end":return o.stop()}}))},this.getAllUsersDescriptions=function(e){var a,n,r,l,s,o;return g.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a="organizations/"+e+"/users/",c.next=3,g.a.awrap(t.getElementsInPath(a));case 3:n=c.sent,r=[],l=0;case 6:if(!(l<n.length)){c.next=20;break}return s=n[l],c.t0=s.uid,c.next=11,g.a.awrap(t.getUserInformation(e,s.uid));case 11:return c.t1=c.sent,c.next=14,g.a.awrap(t.getDescriptors(e,s.uid));case 14:c.t2=c.sent,o={userID:c.t0,userInfo:c.t1,descriptors:c.t2},r.push(o);case 17:l++,c.next=6;break;case 20:return c.abrupt("return",r);case 21:case"end":return c.stop()}}))},this.addUser=function(e,a,n,r,l,s,o,c){var i;return g.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return i="organizations/"+e+"/users/"+a+"/",u.next=3,g.a.awrap(t.checkIfUserExist(e,a));case 3:if(!u.sent){u.next=7;break}return u.abrupt("return",!1);case 7:return u.next=9,g.a.awrap(t.setUserDatabaseInformation(i,n,r,l,s,o,c));case 9:return u.abrupt("return",!0);case 10:case"end":return u.stop()}}))},this.updateUser=function(e,a,n,r,l,s,o,c){var i;return g.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return i="organizations/"+e+"/users/"+a+"/",u.next=3,g.a.awrap(t.setUserDatabaseInformation(i,n,r,l,s,o,c));case 3:return u.abrupt("return",!0);case 4:case"end":return u.stop()}}))},this.setUserDatabaseInformation=function(e,a,n,r,l,s,o){return g.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,g.a.awrap(t.db.ref(e+"age").set(o));case 2:return c.next=4,g.a.awrap(t.db.ref(e+"email").set(r));case 4:return c.next=6,g.a.awrap(t.db.ref(e+"firstName").set(a));case 6:return c.next=8,g.a.awrap(t.db.ref(e+"lastName").set(n));case 8:return c.next=10,g.a.awrap(t.db.ref(e+"level").set(l));case 10:return c.next=12,g.a.awrap(t.db.ref(e+"sex").set(s));case 12:case"end":return c.stop()}}))},this.getUserInformation=function(e,a){var n,r,l,s;return g.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n="organizations/"+e+"/users/"+a+"/",r={email:"",firstName:"",lastName:"",age:0,level:0,sex:""},l=["email","firstName","lastName","age","level","sex"],o.next=5,g.a.awrap(t.getElementsInPath(n,l));case 5:return s=o.sent,r.age=s[0].value,r.email=s[1].value,r.firstName=s[2].value,r.lastName=s[3].value,r.level=s[4].value,r.sex=s[5].value,o.abrupt("return",r);case 13:case"end":return o.stop()}}))},this.markUserAttendance=function(e,a,n){var r,l,s,o,c;return g.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return r="organizations/"+e+"/events/"+a+"/usersAttended/",i.next=3,g.a.awrap(t.getElementsInPath(r));case 3:l=i.sent,s=null,o=0;case 6:if(!(o<l.length)){i.next=14;break}if((c=l[o]).uid!==n){i.next=11;break}return s=c.value,i.abrupt("break",14);case 11:o++,i.next=6;break;case 14:if(null==s){i.next=18;break}return i.abrupt("return",s);case 18:t.db.ref(r+n).set(Date.now());case 19:case"end":return i.stop()}}))},this.deleteUser=function(e,a){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:n="organizations/"+e+"/users/"+a+"/",t.db.ref(n).remove();case 2:case"end":return r.stop()}}))},this.getUsersPreview=function(e){var a,n,r,l,s;return g.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a=[],n="organizations/"+e+"/users/",o.next=4,g.a.awrap(t.getElementsInPath(n));case 4:for(r=o.sent,l=0;l<r.length;l++)(s={firstName:"",lastName:"",level:"",email:"",userID:"",age:"",sex:""}).firstName=r[l].value.firstName,s.lastName=r[l].value.lastName,s.level=r[l].value.level,s.email=r[l].value.email,s.userID=r[l].uid,s.age=r[l].value.age,s.sex=r[l].value.sex,a.push(s);return o.abrupt("return",a);case 7:case"end":return o.stop()}}))},this.deleteUsersDescriptors=function(e,a){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:n="organizations/"+e+"/users/"+a+"/descriptors/",t.db.ref(n).remove();case 2:case"end":return r.stop()}}))},this.getDescriptorsAVG=function(e){var t,a,n,r;return g.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:for(t=[],a=0;a<e[0].length;a++){for(n=0,r=0;r<e.length;r++)n+=e[r][a];n/=e.length,t.push(n)}return l.abrupt("return",t);case 3:case"end":return l.stop()}}))},this.getDescriptors=function(e,a){var n,r,l,s,o;return g.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n="organizations/"+e+"/users/"+a+"/descriptors/",c.next=3,g.a.awrap(t.getElementsInPath(n));case 3:for(r=c.sent,l=[],s=0;s<r.length;s++)o=r[s],l.push(o.value.value);if(0!==l.length){c.next=8;break}return c.abrupt("return",l);case 8:return c.t0=Float32Array,c.next=11,g.a.awrap(t.getDescriptorsAVG(l));case 11:return c.t1=c.sent,c.t2=c.t0.from.call(c.t0,c.t1),l=[c.t2],c.abrupt("return",l);case 15:case"end":return c.stop()}}))},this.insertDescriptor=function(e,a,n){t.db.ref("organizations/"+e+"/users/"+a+"/descriptors/").push({date:Date.now(),value:n})},this.checkIfUserExist=function(e,a){var n,r,l,s;return g.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n="organizations/"+e+"/users/",o.next=3,g.a.awrap(t.getElementsInPath(n));case 3:r=o.sent,l=!1,s=0;case 6:if(!(s<r.length)){o.next=13;break}if(r[s].uid!==a){o.next=10;break}return l=!0,o.abrupt("break",13);case 10:s++,o.next=6;break;case 13:return o.abrupt("return",l);case 14:case"end":return o.stop()}}))},this.getUserAttendaceReport=function(e,a){var n,r;return g.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n="organizations/"+e+"/events/"+a+"/usersAttended/",l.next=3,g.a.awrap(t.getElementsInPath(n));case 3:return r=l.sent,l.abrupt("return",r);case 5:case"end":return l.stop()}}))},this.addEvent=function(e,a,n,r,l,s,o,c,i){var u;return g.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return u="organizations/"+e+"/events/"+a+"/",m.next=3,g.a.awrap(t.checkIfEventExist(e,a));case 3:if(!m.sent){m.next=7;break}return m.abrupt("return",!1);case 7:return m.next=9,g.a.awrap(t.setEventDatabaseInformation(u,n,r,l,s,o,c,i));case 9:return m.abrupt("return",!0);case 10:case"end":return m.stop()}}))},this.updateEvent=function(e,a,n,r,l,s,o,c,i){var u;return g.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return u="organizations/"+e+"/events/"+a+"/",m.next=3,g.a.awrap(t.setEventDatabaseInformation(u,n,r,l,s,o,c,i));case 3:return m.abrupt("return",!0);case 4:case"end":return m.stop()}}))},this.setEventDatabaseInformation=function(e,a,n,r,l,s,o,c){return g.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,g.a.awrap(t.db.ref(e+"name").set(a));case 2:return i.next=4,g.a.awrap(t.db.ref(e+"minimumLevel").set(n));case 4:return i.next=6,g.a.awrap(t.db.ref(e+"allowedUsers").set(r));case 6:return i.next=8,g.a.awrap(t.db.ref(e+"notAllowedUsers").set(l));case 8:return i.next=10,g.a.awrap(t.db.ref(e+"description").set(s));case 10:return i.next=12,g.a.awrap(t.db.ref(e+"eventDate").set(o));case 12:return i.next=14,g.a.awrap(t.db.ref(e+"passcode").set(c));case 14:return i.next=16,g.a.awrap(t.db.ref(e+"active").set(!1));case 16:case"end":return i.stop()}}))},this.loginIntoEvent=function(e,a,n){var r,l,s,o;return g.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return r="organizations/"+e+"/events/",c.next=3,g.a.awrap(t.getElementsInPath(r));case 3:l=c.sent,s=!1,o=0;case 6:if(!(o<l.length)){c.next=13;break}if(l[o].uid!==a){c.next=10;break}return s=l[o].value.passcode===n&&!0===l[o].value.active,c.abrupt("break",13);case 10:o++,c.next=6;break;case 13:return c.abrupt("return",s);case 14:case"end":return c.stop()}}))},this.getEventInformation=function(e,a){var n,r,l,s;return g.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n="organizations/"+e+"/events/"+a+"/",r={allowedUsers:"",minimumLevel:"",notAllowedUsers:""},l=["allowedUsers","minimumLevel","notAllowedUsers"],o.next=5,g.a.awrap(t.getElementsInPath(n,l));case 5:return s=o.sent,r.allowedUsers=s[0].value,r.minimumLevel=s[1].value,r.notAllowedUsers=s[2].value,o.abrupt("return",r);case 10:case"end":return o.stop()}}))},this.deleteEvent=function(e,a){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:n="organizations/"+e+"/events/"+a+"/",t.db.ref(n).remove();case 2:case"end":return r.stop()}}))},this.activateEvent=function(e,a){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:n="organizations/"+e+"/events/"+a+"/active/",t.db.ref(n).set(!0);case 2:case"end":return r.stop()}}))},this.stopEvent=function(e,a){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:n="organizations/"+e+"/events/"+a+"/active/",t.db.ref(n).set(!1);case 2:case"end":return r.stop()}}))},this.getEventsPreview=function(e){var a,n,r,l,s;return g.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a=[],n="organizations/"+e+"/events/",o.next=4,g.a.awrap(t.getElementsInPath(n));case 4:for(r=o.sent,l=0;l<r.length;l++)(s={active:"",eventDate:"",minimumLevel:"",name:"",eventID:"",description:""}).active=r[l].value.active,s.eventDate=r[l].value.eventDate,s.minimumLevel=r[l].value.minimumLevel,s.name=r[l].value.name,s.eventID=r[l].uid,s.description=r[l].value.description,s.allowedUsers=r[l].value.allowedUsers,s.notAllowedUsers=r[l].value.notAllowedUsers,s.passcode=r[l].value.passcode,a.push(s);return o.abrupt("return",a);case 7:case"end":return o.stop()}}))},this.checkIfEventExist=function(e,a){var n,r,l,s;return g.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n="organizations/"+e+"/events/",o.next=3,g.a.awrap(t.getElementsInPath(n));case 3:r=o.sent,l=!1,s=0;case 6:if(!(s<r.length)){o.next=13;break}if(r[s].uid!==a){o.next=10;break}return l=!0,o.abrupt("break",13);case 10:s++,o.next=6;break;case 13:return o.abrupt("return",l);case 14:case"end":return o.stop()}}))},this.getOrganization=function(){var e,a;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.auth.currentUser.uid,n.next=3,g.a.awrap(t.getElementsInPath("users/",e));case 3:if(null==(a=n.sent)){n.next=8;break}return n.abrupt("return",a[0].value.companyName);case 8:return n.abrupt("return",null);case 9:case"end":return n.stop()}}))},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},w.a.initializeApp(x),this.auth=w.a.auth(),this.db=w.a.database()}return Object(c.a)(e,[{key:"getImages",value:function(e,t){var a=[];return w.a.storage().ref().child("images/"+e+"/"+t+"/").listAll().then((function(e){e.items.forEach((function(e){a.push(e.getDownloadURL())}))})).catch((function(e){console.log("Unable to load image set")})),a}},{key:"uploadImage",value:function(e,t,a){var n=w.a.storage().ref(),r=a,l=Date.now()+".jpeg",s=n.child("images/"+e+"/"+t+"/"+l).put(r,{contentType:"image/jpeg"});s.on(w.a.storage.TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case w.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case w.a.storage.TaskState.RUNNING:console.log("Upload is running")}}),(function(e){switch(e.code){case"storage/unauthorized":console.log("Error uploading: unauthorized ");break;case"storage/canceled":console.log("Error uploading: canceled ");break;case"storage/unknown":console.log("Error uploading: unknown")}}),(function(){s.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e)}))}))}}]),e}(),y=f((function(e){var t=e.firebase;return r.a.createElement("span",{onClick:t.doSignOut},"Sign Out")})),I="/home",k=r.a.createContext(null),U=a(98),O=function(e){return function(t){var a=function(a){function n(){return Object(o.a)(this,n),Object(i.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,a),Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth.onAuthStateChanged((function(a){e(a)||t.props.history.push("/signin")}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var a=this;return r.a.createElement(k.Consumer,null,(function(n){return e(n)?r.a.createElement(t,a.props):null}))}}]),n}(r.a.Component);return Object(U.a)(p.f,f)(a)}},j=a(533),S=a(529),D=a(101),N=function(e){var t=e.user;return r.a.createElement(j.a,{inverted:!0,borderless:!0,fluid:!0},r.a.createElement(j.a.Menu,{position:"left"},r.a.createElement(j.a.Item,{as:d.b,to:I,icon:"home"})),r.a.createElement(j.a.Menu,{position:"right"},r.a.createElement(S.a,{text:t.email,item:!0,floating:!0,pointing:!0},r.a.createElement(S.a.Menu,null,r.a.createElement(S.a.Item,{as:d.b,to:"/account"},"Profile"),r.a.createElement(S.a.Item,{as:d.b,to:I},"Event Panel"),r.a.createElement(S.a.Item,{as:d.b,to:"/userpanel"},"User Panel"),r.a.createElement(S.a.Item,null,r.a.createElement(y,null))))))},A=function(){return r.a.createElement(j.a,{inverted:!0,borderless:!0,fluid:!0},r.a.createElement(j.a.Menu,{position:"left"},r.a.createElement(j.a.Item,{as:d.b,to:"/"},r.a.createElement(D.a,{name:"home",size:"big"}))),r.a.createElement(j.a.Menu,{position:"right"},r.a.createElement(j.a.Item,{as:d.b,to:"/signin"},r.a.createElement(D.a,{name:"user",size:"big"}))))},P=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.Consumer,null,(function(e){return e?r.a.createElement(N,{user:e}):r.a.createElement(A,null)})))},z=a(540),M=a(523),L=a(534),R=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(z.a,{minwidth:768},r.a.createElement("div",{className:"masthead masthead-home"},r.a.createElement("div",{className:"overlay-home"},r.a.createElement(M.a,null,r.a.createElement(L.a,{as:"h1",className:"mastead-title"},"CARAS"))))))}}]),t}(n.Component),T=a(35),F=a(43),G=a(535),B=a(526),H=a(538),V=a(532),W={name:"",lastName:"",companyName:"",email:"",username:"",passwordOne:"",passwordTwo:"",error:null},q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.name,r=t.lastName,l=t.companyName,s=t.email,o=t.username,c=t.passwordOne;a.props.firebase.doCreateUserWithEmailAndPassword(s,c).then((function(e){return a.props.firebase.user(e.user.uid).set({name:n,lastName:r,companyName:l,email:s,username:o})})).then((function(){a.setState(Object(F.a)({},W)),a.props.history.push(I)})).catch((function(e){a.setState({error:e})})),e.preventDefault()},a.onChange=function(e){a.setState(Object(T.a)({},e.target.name,e.target.value))},a.state=Object(F.a)({},W),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.lastName,n=e.companyName,l=e.email,s=e.username,o=e.passwordOne,c=e.passwordTwo,i=e.error,u=o!==c||""===o||""===l||""===s||""===t||""===a||""===n;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{as:"h2",color:"teal",textAlign:"center"},"Sign Up"),r.a.createElement(B.a,{size:"large",onSubmit:this.onSubmit},r.a.createElement(H.a,{fluid:!0,stacked:!0},r.a.createElement(B.a.Group,null,r.a.createElement(B.a.Input,{name:"name",label:"First Name",value:t,type:"text",onChange:this.onChange}),r.a.createElement(B.a.Input,{name:"lastName",label:"Last Name",value:a,type:"text",onChange:this.onChange})),r.a.createElement(B.a.Input,{name:"companyName",label:"Company",icon:"building",value:n,type:"text",onChange:this.onChange,iconPosition:"left"}),r.a.createElement(B.a.Input,{name:"username",label:"Username",icon:"user",value:s,type:"text",onChange:this.onChange,iconPosition:"left",placeholder:"username"}),r.a.createElement(B.a.Input,{label:"Email",name:"email",icon:"mail",value:l,type:"text",onChange:this.onChange,iconPosition:"left",placeholder:"email@host.com"}),r.a.createElement(B.a.Input,{icon:"lock",name:"passwordOne",label:"Password",value:o,iconPosition:"left",onChange:this.onChange,placeholder:"Password",type:"password"}),r.a.createElement(B.a.Input,{icon:"lock",name:"passwordTwo",value:c,label:"Confirm Password",iconPosition:"left",onChange:this.onChange,placeholder:"Confirm Password",type:"password"})),r.a.createElement(V.a,{color:"teal",fluid:!0,disabled:u,type:"submit",size:"large"},"Sign Up"),i&&r.a.createElement("p",null,i.message)))}}]),t}(n.Component),_=function(){return r.a.createElement("p",null,"Don't have an account? ",r.a.createElement(d.b,{to:"/signup"},"Sign Up"))},Y=Object(U.a)(p.f,f)(q),J=function(){return r.a.createElement(G.a,{textAlign:"left",centered:!0},r.a.createElement(G.a.Column,{verticalAlign:"middle",width:"6"},r.a.createElement(Y,null)))},$={email:"",error:null},K=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.email;a.props.firebase.doPasswordReset(t).then((function(){a.setState(Object(F.a)({},$))})).catch((function(e){a.setState({error:e})})),e.preventDefault()},a.onChange=function(e){a.setState(Object(T.a)({},e.target.name,e.target.value))},a.state=Object(F.a)({},$),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.error,n=""===t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{as:"h2",color:"teal",textAlign:"center"},"Password Reset"),r.a.createElement(B.a,{size:"small",onSubmit:this.onSubmit},r.a.createElement(H.a,{stacked:!0},r.a.createElement(B.a.Input,{fuid:!0,name:"email",label:"Email",icon:"user",value:t,type:"text",onChange:this.onChange,iconPosition:"left",placeholder:"email@host.com"})),r.a.createElement(V.a,{color:"teal",fluid:!0,disabled:n,type:"submit",size:"large"},"Reset My Password"),a&&r.a.createElement("p",null,a.message)))}}]),t}(n.Component),X=function(){return r.a.createElement("p",null,r.a.createElement(d.b,{to:"/pw-forget"},"Forgot Password?"))},Z=function(){return r.a.createElement(G.a,{verticalAlign:"middle",textAlign:"center"},r.a.createElement(G.a.Column,{verticalAlign:"middle",style:{maxWidth:450}},r.a.createElement(Q,null)))},Q=f(K);function ee(e){var t=e.onChange,a=e.onSubmit,n=e.email,l=e.password,s=e.errors,o=e.isInvalid;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{as:"h2",color:"teal",textAlign:"center"},"Sign in"),r.a.createElement(B.a,{size:"small",onSubmit:a},r.a.createElement(H.a,{stacked:!0},r.a.createElement(B.a.Input,{fuid:!0,icon:"user",name:"email",type:"text",value:n,onChange:t,iconPosition:"left",placeholder:"email@host.com"}),r.a.createElement(B.a.Input,{fluid:"true",icon:"lock",name:"password",value:l,iconPosition:"left",onChange:t,placeholder:"password",type:"password"})),r.a.createElement(V.a,{color:"teal",fluid:!0,disabled:o,type:"submit",size:"large"},"Login"),s&&r.a.createElement("p",null,s.message)))}var te=a(531),ae={email:"",password:"",error:null},ne=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){console.log("On submit called");var t=a.state,n=t.email,r=t.password;a.props.firebase.doSignInWithEmailAndPassword(n,r).then((function(){a.setState(Object(F.a)({},ae)),a.props.history.push(I),console.log(I)})).catch((function(e){a.setState({error:e})})),e.preventDefault()},a.onChange=function(e){a.setState(Object(T.a)({},e.target.name,e.target.value))},a.state=Object(F.a)({},ae),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,l=""===a||""===t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,{onChange:this.onChange,onSubmit:this.onSubmit,email:t,password:a,errors:n,isInvalid:l}))}}]),t}(n.Component),re=Object(U.a)(p.f,f)(ne),le=function(){return r.a.createElement(G.a,{textAlign:"center",verticalAlign:"middle"},r.a.createElement(G.a.Column,{style:{maxWidth:450}},r.a.createElement(re,null),r.a.createElement(te.a,null,r.a.createElement(X,null),r.a.createElement(_,null))))},se=a(62),oe=a(527),ce=a(524),ie=a(530),ue=[{key:"ma",value:"male",text:"Male"},{key:"fe",value:"female",text:"Female"}],me=[{key:"1",text:"1",value:"1"},{key:"2",text:"2",value:"2"},{key:"3",text:"3",value:"3"},{key:"4",text:"4",value:"4"},{key:"5",text:"5",value:"5"}],de=a(150),pe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e,t){var n,r;return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.name,r=t.value,a.setState(Object(F.a)({},a.state.values,Object(T.a)({},n,r)));case 2:case"end":return e.stop()}}))},a.onSubmit=function(e){var t,n,r,l,s,o,c,i,u,m,d,p,h,f;return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.id,r=t.name,l=t.level,s=t.allowedUsers,o=t.notAllowedUsers,c=t.description,i=t.date,u=t.code,console.log(a.state),m=a.props,d=m.organization,p=m.updateEvents,h=m.closeModal,f=m.firebase,console.log(d),e.next=6,g.a.awrap(f.updateEvent(d,n,r,l,s,o,c,i,u));case 6:if(e.sent){e.next=10;break}return alert("Event could not be updated"),e.abrupt("return");case 10:p(),h("Edit");case 12:case"end":return e.stop()}}))},a.state={id:a.props.event.eventID,name:a.props.event.name,level:a.props.event.minimumLevel,allowedUsers:a.props.event.allowedUsers,notAllowedUsers:a.props.event.notAllowedUsers,description:a.props.event.description,date:a.props.event.eventDate,code:a.props.event.passcode},console.log(a.props.event),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.level,l=t.allowedUsers,s=t.notAllowedUsers,o=t.description,c=t.date;t.code;return r.a.createElement(G.a,null,r.a.createElement(G.a.Row,null,r.a.createElement(G.a.Column,null,r.a.createElement(B.a,{onSubmit:this.onSubmit,size:"large"},r.a.createElement(B.a.Group,{width:"equal"},r.a.createElement(B.a.Input,{fluid:!0,label:"Event Name",name:"name",type:"text",width:8,maxLength:"25",value:a,onChange:this.onChange}),r.a.createElement(B.a.Field,{content:r.a.createElement(de.a,{name:"date",label:"Start Date",placeholder:c,onChange:function(t,a){try{var n={name:a.name,value:a.value.toLocaleDateString()};e.onChange(t,n)}catch(l){var r={name:a.name,value:""};e.onChange(t,r)}}})})),r.a.createElement(B.a.Group,null,r.a.createElement(B.a.Select,{fluid:!0,label:"Level",name:"level",width:3,value:n,options:me,onChange:this.onChange}),r.a.createElement(B.a.Input,{fluid:!0,label:"Allowed Users",name:"allowedUsers",type:"text",width:8,value:l,onChange:this.onChange}),r.a.createElement(B.a.Input,{fluid:!0,label:"Not Allowed Users",name:"notAllowedUsers",type:"text",width:8,value:s,onChange:this.onChange})),r.a.createElement(B.a.Group,{widths:"equal"},r.a.createElement(B.a.TextArea,{label:"Description",name:"description",type:"text",width:8,value:o,onChange:this.onChange})),r.a.createElement(V.a,{content:"Cancel",size:"large",color:"red",type:"button",icon:"cancel",labelPosition:"left",floated:"right",onClick:function(){e.setState({}),e.props.closeModal("Edit")}}),r.a.createElement(V.a,{type:"submit",content:"Submit",size:"large",color:"green",icon:"check",labelPosition:"left",floated:"left"})))))}}]),t}(r.a.Component),he=O((function(e){return!!e}))(f(pe));function fe(e){var t=e.event,a=e.organization,l=e.activateEvent,s=e.updateEvents,o=e.stopEvent,c=e.deleteEvent,i=Object(n.useState)(!1),u=Object(se.a)(i,2),m=u[0],d=u[1],p=(r.a.createElement("p",null,r.a.createElement(D.a,{name:"user"})),function(e){switch(e){case"Edit":d(!1)}}),h=r.a.createElement(oe.a,{onClose:function(){p("Create")},open:m,size:"tiny",closeOnEscape:!0,closeOnDimmerClick:!1},r.a.createElement(oe.a.Header,{as:"h1"},"Edit Event"),r.a.createElement(oe.a.Content,null,r.a.createElement(he,{event:t,organization:a,updateEvents:s,closeModal:p})));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,{fluid:!0,raised:!0},r.a.createElement(ie.a.Content,null,r.a.createElement(V.a,{stackable:"true",color:t.active?"red":"blue",icon:t.active?"stop":"play",onClick:function(){t.active?o(a,t.eventID):l(a,t.eventID),s()},size:"medium",floated:"right"}),r.a.createElement(ie.a.Header,null,t.name),r.a.createElement(ie.a.Meta,null,"Created on ",t.eventDate," "),r.a.createElement(ie.a.Description,null," ",t.description," ")),r.a.createElement(ie.a.Content,{extra:!0,textAlign:"center"},r.a.createElement("div",{className:"ui two buttons"},r.a.createElement(V.a,{color:"blue",content:"View",icon:"eye",labelPosition:"left",onClick:function(){return function(e){switch(e){case"Edit":d(!0)}}("Edit")}}),r.a.createElement(V.a,{color:"red",content:"Delete",icon:"trash",labelPosition:"left",onClick:function(){c(a,t.eventID),s()}})))),h)}function ve(e){var t=e.organization,a=e.addEvent,l=e.updateEvents,s=e.closeModal,o=Object(n.useState)(""),c=Object(se.a)(o,2),i=c[0],u=c[1],m=Object(n.useState)({id:"",name:"",code:"",active:!1,minimum_level:"",allowedUsers:"",notAllowedUsers:"",description:"",date:""}),d=Object(se.a)(m,2),p=d[0],h=d[1],f=Object(n.useState)(!0),v=Object(se.a)(f,2),E=v[0],b=v[1],w=p,x=E,C=function(e,t){w[e]=t,h(w),x=""===p.name||""===p.code||""===p.minimum_level||""===p.description||""===p.date,b(x)};return r.a.createElement(G.a,null,r.a.createElement(G.a.Row,null,r.a.createElement(G.a.Column,null,r.a.createElement(B.a,{onSubmit:function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.awrap(a(t,p.id,p.name,p.minimum_level,p.allowedUsers,p.notAllowedUsers,p.description,p.date,p.code));case 2:e.sent?(s("Create"),l()):alert("Event ID already in use. Verify if the event was already entered.");case 4:case"end":return e.stop()}}))}},r.a.createElement(B.a.Group,null,r.a.createElement(B.a.Input,{label:"Event Name",name:"name",type:"text",maxLength:"15",onChange:function(e,t){C(t.name,t.value)}}),r.a.createElement(B.a.Input,{label:"Event Code",name:"code",type:"text",value:i,maxLength:"5",onChange:function(e,t){/[0-9]|\./.test(t.value)&&(u(t.value),C(t.name,t.value))}}),r.a.createElement(B.a.Input,{label:"Event ID",name:"id",type:"text",maxLength:"10",onChange:function(e,t){C(t.name,t.value)}})),r.a.createElement(B.a.TextArea,{label:"Description",name:"description",type:"text",onChange:function(e,t){C(t.name,t.value)}}),r.a.createElement(B.a.Group,null,r.a.createElement(B.a.Input,{label:"Allowed Users",name:"allowedUsers",type:"text",onChange:function(e,t){C(t.name,t.value)}}),r.a.createElement(B.a.Dropdown,{label:"Minimum Level",name:"minimum_level",placeholder:"1 - 5",fluid:!0,selection:!0,options:[{key:"1",text:"1",value:"1"},{key:"2",text:"2",value:"2"},{key:"3",text:"3",value:"3"},{key:"4",text:"4",value:"4"},{key:"5",text:"5",value:"5"}],onChange:function(e,t){C(t.name,t.value)}}),r.a.createElement(B.a.Field,{content:r.a.createElement(de.a,{name:"date",label:"Start Date",onChange:function(e,t){try{var a=t.value.toLocaleDateString();C(t.name,a)}catch(n){C(t.name,"")}}})})),r.a.createElement(B.a.Group,null,r.a.createElement(B.a.Input,{label:"Not Allowed Users",name:"notAllowedUsers",type:"text",onChange:function(e,t){C(t.name,t.value)}})),r.a.createElement(V.a,{content:"Cancel",size:"large",type:"button",color:"red",icon:"cancel",labelPosition:"left",floated:"right",onClick:function(){s("Create")}}),r.a.createElement(V.a,{type:"submit",disabled:E,content:"Submit",size:"large",color:"green",icon:"check",labelPosition:"left",floated:"right"})))))}function Ee(e){var t=e.organization,a=e.events,l=e.addEvent,s=e.updateEvents,o=e.activateEvent,c=e.stopEvent,i=e.deleteEvent,u=Object(n.useState)(!1),m=Object(se.a)(u,2),d=m[0],p=m[1],h=Object(n.useState)(!1),f=Object(se.a)(h,2),v=(f[0],f[1]),E=Object(n.useState)(!1),g=Object(se.a)(E,2),b=(g[0],g[1]),w=[],x=[];a&&a.forEach((function(e){e.active?w.push(e):x.push(e)}));var C=function(e){switch(e){case"View":b(!1);break;case"Edit":v(!1);break;case"Create":p(!1)}},y=r.a.createElement(oe.a,{closeIcon:!0,onClose:function(){C("Create")},open:d,size:"large",closeOnEscape:!0,closeOnDimmerClick:!1},r.a.createElement(oe.a.Header,{as:"h1"},"New Event"),r.a.createElement(oe.a.Content,null,r.a.createElement(ve,{organization:t,addEvent:l,updateEvents:s,closeModal:C})));r.a.createElement(r.a.Fragment,null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,null,r.a.createElement(G.a,null,r.a.createElement(G.a.Row,null,r.a.createElement(G.a.Column,null,r.a.createElement(V.a,{content:"Add Event",color:"green",icon:"add",labelPosition:"left",floated:"right",onClick:function(){p(!0)}}))))),r.a.createElement(ce.a,{horizontal:!0},r.a.createElement(L.a,{as:"h2"},"Active Events")),r.a.createElement(M.a,null,r.a.createElement(G.a,{stackable:!0},r.a.createElement(G.a.Row,null,r.a.createElement(G.a.Column,null,r.a.createElement(ie.a.Group,{centered:!0,itemsPerRow:3},w&&w.map((function(e,a){return r.a.createElement(fe,{event:e,key:a,organization:t,updateEvents:s,activateEvent:o,stopEvent:c,deleteEvent:i})}))))))),r.a.createElement(ce.a,{horizontal:!0},r.a.createElement(L.a,{as:"h2"},"Inactive Events")),r.a.createElement(M.a,null,r.a.createElement(G.a,{stackable:!0},r.a.createElement(G.a.Row,null,r.a.createElement(G.a.Column,null,r.a.createElement(ie.a.Group,{centered:!0,itemsPerRow:3},x&&x.map((function(e,a){return r.a.createElement(fe,{event:e,key:a,organization:t,updateEvents:s,activateEvent:o,deleteEvent:i})}))))))),y)}var ge=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={organization:"",addEvent:null,events:[],updateEvents:null,activateEvent:null,stopEvent:null,deleteEvent:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,r,l,s,o=this;return g.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,g.a.awrap(this.props.firebase.getOrganization());case 2:return e=c.sent,c.next=5,g.a.awrap(this.props.firebase.getEventsPreview(e));case 5:t=c.sent,a=this.props.firebase.addEvent,n=this.props.firebase.activateEvent,r=this.props.firebase.stopEvent,l=this.props.firebase.deleteEvent,s=function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.awrap(o.props.firebase.getEventsPreview(o.state.organization));case 2:e=t.sent,o.setState({events:e});case 4:case"end":return t.stop()}}))},this.setState({organization:e,events:t,addEvent:a,updateEvents:s,activateEvent:n,stopEvent:r,deleteEvent:l});case 12:case"end":return c.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state,t=e.organization,a=e.events,n=e.addEvent,l=e.updateEvents,s=e.activateEvent,o=e.stopEvent,c=e.deleteEvent;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,{events:a,organization:t,addEvent:n,updateEvents:l,activateEvent:s,stopEvent:o,deleteEvent:c}))}}]),t}(n.Component),be=O((function(e){return!!e}))(ge),we={passwordOne:"",passwordTwo:"",error:null},xe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.passwordOne;a.props.firebase.doPasswordUpdate(t).then((function(){a.setState(Object(F.a)({},we))})).catch((function(e){a.setState({error:e})})),e.preventDefault()},a.onChange=function(e){a.setState(Object(T.a)({},e.target.name,e.target.value))},a.state=Object(F.a)({},we),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.passwordOne,a=e.passwordTwo,n=e.error,l=t!==a||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"passwordOne",value:t,onChange:this.onChange,type:"password",placeholder:"New Password"}),r.a.createElement("input",{name:"passwordTwo",value:a,onChange:this.onChange,type:"password",placeholder:"Confirm New Password"}),r.a.createElement("button",{disabled:l,type:"submit"},"Reset My Password"),n&&r.a.createElement("p",null,n.message))}}]),t}(n.Component),Ce=f(xe),ye=O((function(e){return!!e}))((function(){return r.a.createElement(k.Consumer,null,(function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Account: ",e.email),r.a.createElement(Q,null),r.a.createElement(Ce,null))}))})),Ie=(a(185),a(29)),ke=(a(186),a(110)),Ue=a.n(ke),Oe=a(151),je=a(536),Se=a(525),De=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleTakePhoto=function(e){var t,n,r,l,s,o;return g.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=a.props.children,n=t.organization,r=t.userID,a.setState({loading:!0}),0!=a.state.remainingPhotos){c.next=4;break}return c.abrupt("return");case 4:return c.next=6,g.a.awrap(fetch(e).then((function(e){return e.blob()})));case 6:return l=c.sent,c.next=9,g.a.awrap(Ie.c(l));case 9:return s=c.sent,c.next=12,g.a.awrap(Ie.d(s).withFaceLandmarks().withFaceDescriptors());case 12:if(0!==(o=c.sent).length){c.next=16;break}return alert("No face detected. Please try again."),c.abrupt("return");case 16:if(!(o.length>1)){c.next=19;break}return alert("Multiple faces detected. Please try again."),c.abrupt("return");case 19:return c.next=21,g.a.awrap(a.props.firebase.insertDescriptor(n,r,o[0].descriptor));case 21:a.setState({remainingPhotos:a.state.remainingPhotos-1}),a.setState({loading:!1});case 23:case"end":return c.stop()}}))},a.state={loading:!1,remainingPhotos:5},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.remainingPhotos,n=t.loading,l=this.props.children,s=l.updateUsers,o=l.closeModal;return Promise.all([Ie.e.faceRecognitionNet.loadFromUri("/models"),Ie.e.faceLandmark68Net.loadFromUri("/models"),Ie.e.ssdMobilenetv1.loadFromUri("/models")]),0==a&&(alert("Completed!"),o(),s()),r.a.createElement(G.a,{centered:!0},r.a.createElement(G.a.Row,null,r.a.createElement(L.a,{as:"h1",icon:"camera"},"Take Pictures",r.a.createElement(L.a.Subheader,null,"Remaining Photos: ",r.a.createElement(Oe.a,{icon:"picture",content:a})))),r.a.createElement(G.a.Row,null,r.a.createElement(G.a.Column,{stretched:!0},r.a.createElement(je.a,{active:n},r.a.createElement(Se.a,{content:"Processing Image...",size:"huge"})),r.a.createElement(Ue.a,{onTakePhoto:function(t){e.handleTakePhoto(t)}}))))}}]),t}(n.Component),Ne=f(De),Ae=(a(263),new Array),Pe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(){var e,t,n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:e=0,t=a.state.images,n=0;case 3:if(!(n<t.length)){r.next=11;break}return r.next=6,g.a.awrap(a.handlePhoto(t[n]));case 6:r.sent&&e++;case 8:n++,r.next=3;break;case 11:0===e?alert("You need to upload at least one valid picture"):(alert("Images processed correctly"),a.props.children.closeModal(),a.props.children.updateUsers());case 12:case"end":return r.stop()}}))},a.handlePhoto=function(e){var t,n,r,l,s,o;return g.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,g.a.awrap(Ie.c(e));case 2:return t=c.sent,c.next=5,g.a.awrap(Ie.d(t).withFaceLandmarks().withFaceDescriptors());case 5:if(n=c.sent,r=a.props.children,l=r.organization,s=r.userID,o=a.props.firebase,0!==n.length){c.next=11;break}return alert("No face detected on the image "+e.name),c.abrupt("return",!1);case 11:if(!(n.length>1)){c.next=14;break}return alert("More than one face detected on the image "+e.name),c.abrupt("return",!1);case 14:return c.next=16,g.a.awrap(o.insertDescriptor(l,s,n[0].descriptor));case 16:return c.abrupt("return",!0);case 17:case"end":return c.stop()}}))},a.state={images:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=5==this.state.images.length;return Promise.all([Ie.e.faceRecognitionNet.loadFromUri("/models"),Ie.e.faceLandmark68Net.loadFromUri("/models"),Ie.e.ssdMobilenetv1.loadFromUri("/models")]),r.a.createElement(G.a,null,r.a.createElement(G.a.Row,null,r.a.createElement(L.a,{textAlign:"center",as:"h1",icon:!0},r.a.createElement(D.a,{name:"image file"}),"Upload Your Pictures")),r.a.createElement(ce.a,null),r.a.createElement(G.a.Row,{centered:!0},r.a.createElement(B.a,{onSubmit:this.onSubmit},r.a.createElement(B.a.Input,{type:"file",name:"0",multiple:!0,accept:"image/jpeg, image/png",onChange:function(t,a){Ae[a.name]=t.target.files[0],e.setState({images:Ae})}}),r.a.createElement(B.a.Input,{type:"file",name:"1",accept:"image/jpeg, image/png",onChange:function(t,a){Ae[1]=t.target.files[0],e.setState({images:Ae})}}),r.a.createElement(B.a.Input,{type:"file",name:"2",accept:"image/jpeg, image/png",onChange:function(t,a){Ae[2]=t.target.files[0],e.setState({images:Ae})}}),r.a.createElement(B.a.Input,{type:"file",name:"3",accept:"image/jpeg, image/png",onChange:function(t,a){Ae[3]=t.target.files[0],e.setState({images:Ae})}}),r.a.createElement(B.a.Input,{type:"file",name:"4",accept:"image/jpeg, image/png",onChange:function(t,a){Ae[4]=t.target.files[0],e.setState({images:Ae})}}),r.a.createElement(V.a,{type:"submit",icon:"upload",labelPosition:"right",content:"Upload",primary:!0,disabled:!t}))))}}]),t}(n.Component),ze=f(Pe),Me={userID:"",firstName:"",lastName:"",email:"",level:"",gender:"",age:""},Le=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t,n,r,l,s,o,c,i,u;return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.user,n=t.userID,r=t.firstName,l=t.lastName,s=t.email,o=t.level,c=t.gender,i=t.age,u=a.state.organization,e.next=4,g.a.awrap(a.props.firebase.addUser(u,n,r,l,s,o,c,i));case 4:if(e.sent){e.next=8;break}return alert("User ID already in use. Verify if the user was already entered."),e.abrupt("return");case 8:a.setState({viewConfirmationImageModal:!0});case 9:case"end":return e.stop()}}))},a.onChange=function(e,t){var n=t.name,r=t.value;Me[n]=r,a.setState({user:Me})},a.closeModal=function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.awrap(a.setState({viewImageModal:!1}));case 2:return e.next=4,g.a.awrap(a.props.closeModal("Create"));case 4:case"end":return e.stop()}}))},a.state={viewImageModal:!1,viewConfirmationImageModal:!1,answer:!1,recognizer:"",organization:a.props.children.organization,user:{userID:"",firstName:"",lastName:"",email:"",level:"",gender:"",age:""},errors:{userID:null,email:null}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.user,a=t.userID,n=t.firstName,l=t.lastName,s=t.email,o=t.age,c=t.gender,i=t.level,u=this.state,m=u.organization,d=u.viewConfirmationImageModal,p=u.viewImageModal,h=u.recognizer,f=this.props.closeModal,v=""===a||""===n||""===l||""===s||""===c||""===i||""===o;return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,null,r.a.createElement(G.a.Row,null,r.a.createElement(G.a.Column,null,r.a.createElement(B.a,{noValidate:!0,onSubmit:this.onSubmit,size:"large"},r.a.createElement(B.a.Group,{width:"equal"},r.a.createElement(B.a.Input,{fluid:!0,label:"First Name",name:"firstName",type:"text",width:8,maxLength:"25",value:n,onChange:this.onChange}),r.a.createElement(B.a.Input,{fluid:!0,label:"Last Name",name:"lastName",type:"text",width:8,maxLength:"25",value:l,onChange:this.onChange}),"}",r.a.createElement(B.a.Select,{fluid:!0,label:"Level",name:"level",width:3,options:me,onChange:this.onChange})),r.a.createElement(B.a.Group,{widths:"equal"},r.a.createElement(B.a.Input,{fluid:!0,label:"User ID",name:"userID",type:"text",width:4,maxLength:"15",value:a,onChange:function(t,a){var n=t.param;/^[A-Za-z0-9]+/.test(a.value)&&e.onChange(n,a)}}),r.a.createElement(B.a.Select,{fluid:!0,label:"Gender",name:"gender",width:2,options:ue,onChange:this.onChange}),r.a.createElement(B.a.Input,{fluid:!0,label:"Age",name:"age",type:"text",value:o,maxLength:"2",width:2,onChange:function(t,a){var n=t.param;/^[\d]*$/.test(a.value)&&e.onChange(n,a)}})),r.a.createElement(B.a.Group,{widths:"equal"},r.a.createElement(B.a.Input,{fluid:!0,label:"Email",name:"email",type:"text",width:8,maxLength:"40",value:s,onChange:this.onChange})),r.a.createElement(V.a,{content:"Cancel",size:"large",color:"red",type:"button",icon:"cancel",labelPosition:"left",floated:"right",onClick:function(){Me={userID:"",firstName:"",lastName:"",email:"",level:"",gender:"",age:""},e.setState(Me),e.props.closeModal("Create")}}),r.a.createElement(V.a,{type:"submit",content:"Submit",disabled:v,size:"large",color:"green",icon:"check",labelPosition:"left",floated:"left"}))))),r.a.createElement(oe.a,{size:"tiny",closeOnDimmerClick:!1,open:d},r.a.createElement(oe.a.Header,null,"Required Images"),r.a.createElement(oe.a.Content,null,r.a.createElement(oe.a.Description,null,r.a.createElement("p",null," To complete this user's profile, we need a set of pictures for our AI to identify this user upon check in. These pictures are securely stored in our database and will not be shared."),r.a.createElement("p",null," How would you like to provide these pictures?"))),r.a.createElement(oe.a.Actions,null,r.a.createElement(G.a,{stackable:!1},r.a.createElement(G.a.Row,{columns:1},r.a.createElement(G.a.Column,null,r.a.createElement(V.a,{primary:!0,icon:"camera",labelPosition:"left",floated:"left",content:"Take Pictures",onClick:function(){e.setState({answer:!0}),e.setState({recognizer:r.a.createElement(Ne,{children:{updateUsers:e.props.userUpdate,organization:m,userID:a,closeModal:e.closeModal}})}),e.setState({viewConfirmationImageModal:!1}),e.setState({viewImageModal:!0})}}),r.a.createElement(V.a,{primary:!0,icon:"image file",labelPosition:"left",floated:"right",content:"Upload Files",onClick:function(){e.setState({answer:!1}),e.setState({recognizer:r.a.createElement(ze,{children:{updateUsers:e.props.userUpdate,organization:m,userID:a,closeModal:e.closeModal}})}),e.setState({viewConfirmationImageModal:!1}),e.setState({viewImageModal:!0})}})))))),r.a.createElement(oe.a,{size:"small",open:p,onClose:function(){return f("Create")},closeOnDimmerClick:!1},r.a.createElement(oe.a.Content,{content:h})))}}]),t}(n.Component),Re=O((function(e){return!!e}))(f(Le)),Te=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={recognizer:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"addEventClick",value:function(){var e,t,a,n,r,l,s,o,c,i;return g.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(e=document.getElementById("eventID").value,t=document.getElementById("eventName").value,a=document.getElementById("minimumLevel").value,n=document.getElementById("allowedUsers").value,r=document.getElementById("notAllowedUsers").value,l=document.getElementById("description").value,s=document.getElementById("eventDate").value,o=document.getElementById("passcode").value,c="All fields must be filled. Please enter a value for: ",""===e&&(c+=" eventID"),""===t&&(c+=" Event Name"),""===a&&(c+=" Minimum Level"),""===l&&(c+=" Description"),""===s&&(c+=" Event Date"),""===o&&(c+=" Pass Code"),"All fields must be filled. Please enter a value for: "===c){u.next=18;break}return alert(c),u.abrupt("return");case 18:return i=this.props.children.organization,u.next=21,g.a.awrap(this.props.firebase.addEvent(i,e,t,a,n,r,l,s,o));case 21:u.sent||alert("Event ID already in use. Verify if the event was already entered."),this.props.eventUpdate();case 24:case"end":return u.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"NEW EVENT"),r.a.createElement("div",null,r.a.createElement("p",null,"Event ID:"),r.a.createElement("input",{id:"eventID"}),r.a.createElement("p",null,"Event Name:"),r.a.createElement("input",{id:"eventName"}),r.a.createElement("p",null,"Minimum Level:"),r.a.createElement("input",{id:"minimumLevel"}),r.a.createElement("p",null,"Allowed Employees ID:"),r.a.createElement("input",{id:"allowedUsers"}),r.a.createElement("p",null,"Not Allowed Employees ID:"),r.a.createElement("input",{id:"notAllowedUsers"}),r.a.createElement("p",null,"Description:"),r.a.createElement("input",{id:"description"}),r.a.createElement("p",null,"Pass Code:"),r.a.createElement("input",{id:"passcode"}),r.a.createElement("p",null,"Event Date:"),r.a.createElement("input",{id:"eventDate"}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return e.addEventClick()}},"Insert Event")))}}]),t}(n.Component),Fe=O((function(e){return!!e}))(f(Te)),Ge=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={organization:"",users:[],events:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e,t,a;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(this.props.firebase.getOrganization());case 2:return e=n.sent,n.next=5,g.a.awrap(this.props.firebase.getUsersPreview(e));case 5:return t=n.sent,n.next=8,g.a.awrap(this.props.firebase.getEventsPreview(e));case 8:a=n.sent,this.setState({organization:e,users:t,events:a});case 10:case"end":return n.stop()}}),null,this)}},{key:"updateEvent",value:function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.awrap(this.props.firebase.getEventsPreview(this.state.organization));case 2:e=t.sent,this.setState({events:e});case 4:case"end":return t.stop()}}),null,this)}},{key:"updateUser",value:function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.awrap(this.props.firebase.getUsersPreview(this.state.organization));case 2:e=t.sent,this.setState({users:e});case 4:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state,t=e.organization,a=e.users,n=e.events;return r.a.createElement("div",null,r.a.createElement("h1",null,"Admin"),r.a.createElement("p",null,"Upload file"),r.a.createElement("p",null,"Add User"),r.a.createElement(Re,{children:{organization:t},userUpdate:this.updateUser.bind(this)}),r.a.createElement("p",null,"Add Event"),r.a.createElement(Fe,{children:{organization:t},eventUpdate:this.updateEvent.bind(this)}),r.a.createElement("br",null),r.a.createElement("h2",null,"USER LIST"),r.a.createElement(Be,{users:a}),r.a.createElement("br",null),r.a.createElement("h2",null,"EVENT LIST"),r.a.createElement(He,{events:n}))}}]),t}(n.Component),Be=function(e){var t=e.users;return r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("div",null,r.a.createElement("h3",null," ",e.email," "),r.a.createElement("p",null," ",e.firstName," ",e.lastName," "),r.a.createElement("p",null," Level: ",e.level," "))})))},He=function(e){var t=e.events;return r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("div",null,r.a.createElement("h3",null," ",e.eventID," "),r.a.createElement("p",null," Name: ",e.name," "),r.a.createElement("p",null," Date: ",e.eventDate," "),r.a.createElement("p",null," Min Level: ",e.minimumLevel," "),r.a.createElement("p",null," Status: ",e.active," "))})))},Ve=(O((function(e){return!!e}))(Ge),function(e){function t(e){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.children.organization,t=this.props.children.event,a=this.props.firebase;function n(t){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(a.getDescriptors(e,t));case 2:if(0!=(n=r.sent).length){r.next=5;break}return r.abrupt("return",null);case 5:return r.abrupt("return",new Ie.b(t,n));case 6:case"end":return r.stop()}}))}function l(n,r){var l,o,c,i,u,m,d,p,h,f;return g.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,g.a.awrap(a.getAllUsersDescriptions(e));case 2:l=v.sent,0,o=-1,c=0,i=0,u=0,m=function(){var e,t,a,s,m,p,h,f,v,E;return g.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:if(!(null===(e=l[d]).descriptors||e.descriptors.length<=0)){b.next=3;break}return b.abrupt("return","continue");case 3:return t=new Ie.b(e.userID,e.descriptors),b.next=6,g.a.awrap(new Ie.a(t,.6));case 6:return a=b.sent,s={width:n.width,height:n.height},b.next=10,g.a.awrap(Ie.f(r,s));case 10:return m=b.sent,p=m.map((function(e){return a.findBestMatch(e.descriptor)})),b.next=14,g.a.awrap(Ie.d(n).withAgeAndGender());case 14:h=b.sent,f=100*(1-p[0].distance),v=Math.abs(e.userInfo.age-h[0].age),E=h[0].gender==e.userInfo.sex,f>c&&(c=f,i=v,u=E,o=d);case 19:case"end":return b.stop()}}))},d=0;case 10:if(!(d<l.length)){v.next=19;break}return v.next=13,g.a.awrap(m());case 13:if("continue"!==v.sent){v.next=16;break}return v.abrupt("continue",16);case 16:d++,v.next=10;break;case 19:if(!(o<0)){v.next=22;break}return alert("Unable to locate user."),v.abrupt("return");case 22:return p=l[o].userID,h=l[o].userInfo,v.next=26,g.a.awrap(a.getEventInformation(e,t));case 26:if(!(f=v.sent).notAllowedUsers.includes(p)){v.next=30;break}return alert("USER NOT ALLOWED"),v.abrupt("return");case 30:if(!(f.minimumLevel>h.level)||f.allowedUsers.includes(p)){v.next=33;break}return alert("USER NOT ALLOWED"),v.abrupt("return");case 33:return v.next=35,g.a.awrap(s(c,i,u,p,h));case 35:case"end":return v.stop()}}))}function s(n,r,l,s,o){var c,i;return g.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(console.log("FACE ACCURACY: "+n+" %"),console.log("AGE DIFFERENCE: "+r+" years"),console.log("SEX DETECTED: "+l),c="",r<7&&l?n>55?(console.log("AUTHENTICATION CORRECT"),c="AUTHENTICATION CORRECT"):n>50?(console.log("PLEASE TRY AGAIN"),c="PLEASE TRY AGAIN"):(console.log("AUTHENTICATION FAILED"),c="AUTHENTICATION FAILED"):(console.log("AUTHENTICATION FAILED"),c="AUTHENTICATION FAILED"),document.getElementById("ResultText").innerHTML="RESULT: "+c,"AUTHENTICATION CORRECT"==c){u.next=9;break}return console.log("NO RECORDING ATTENDANCE"),u.abrupt("return");case 9:return u.next=11,g.a.awrap(a.markUserAttendance(e,t,s));case 11:i=u.sent,console.log(i),null!=i&&alert("User "+o.firstName+" "+o.lastName+" was registered already at "+new Date(i).toLocaleString());case 14:case"end":return u.stop()}}))}return Promise.all([Ie.e.faceRecognitionNet.loadFromUri("/models"),Ie.e.faceLandmark68Net.loadFromUri("/models"),Ie.e.ssdMobilenetv1.loadFromUri("/models"),Ie.e.ageGenderNet.loadFromUri("/models"),Ie.e.tinyFaceDetector.loadFromUri("/models"),Ie.e.faceLandmark68TinyNet.loadFromUri("/models")]),r.a.createElement("div",{id:"MainControl"},r.a.createElement(Ue.a,{onTakePhoto:function(r){!function(r){var o,c,i,u,m,d,p,h,f,v,E,b,w,x,C;g.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,g.a.awrap(fetch(r).then((function(e){return e.blob()})));case 2:return o=y.sent,y.next=5,g.a.awrap(Ie.c(o));case 5:return c=y.sent,y.next=8,g.a.awrap(Ie.d(c).withFaceLandmarks().withFaceDescriptors());case 8:if(0!==(i=y.sent).length){y.next=12;break}return alert("No face detected. Please try again."),y.abrupt("return");case 12:if(!(i.length>1)){y.next=15;break}return alert("Multiple faces detected. Please try again."),y.abrupt("return");case 15:if(""!=(u=document.getElementById("userId").value)){y.next=21;break}return alert("No user ID detected. Process will take longer to detect user"),y.next=20,g.a.awrap(l(c,i));case 20:return y.abrupt("return");case 21:return y.next=23,g.a.awrap(a.getUserInformation(e,u));case 23:if(null!=(m=y.sent)){y.next=27;break}return alert("Invalid user id"),y.abrupt("return");case 27:return y.next=29,g.a.awrap(a.getEventInformation(e,t));case 29:if(!(d=y.sent).notAllowedUsers.includes(u)){y.next=33;break}return alert("USER NOT ALLOWED"),y.abrupt("return");case 33:if(!(d.minimumLevel>m.level)||d.allowedUsers.includes(u)){y.next=36;break}return alert("USER NOT ALLOWED"),y.abrupt("return");case 36:return y.next=38,g.a.awrap(n(u));case 38:if(null!=(p=y.sent)&&0!=p.length){y.next=42;break}return alert("Unable to process. Invalid user ID or user has no face descriptors stored"),y.abrupt("return");case 42:return y.next=44,g.a.awrap(new Ie.a(p,.6));case 44:return h=y.sent,f={width:c.width,height:c.height},y.next=48,g.a.awrap(Ie.f(i,f));case 48:return v=y.sent,E=v.map((function(e){return h.findBestMatch(e.descriptor)})),y.next=52,g.a.awrap(Ie.d(c).withAgeAndGender());case 52:return b=y.sent,w=100*(1-E[0].distance),x=Math.abs(m.age-b[0].age),C=b[0].gender==m.sex,y.next=58,g.a.awrap(s(w,x,C,u,m));case 58:case"end":return y.stop()}}))}(r)}}),r.a.createElement("div",{style:{marginLeft:"50%"}},r.a.createElement("div",null,r.a.createElement("p",null,"User ID"),r.a.createElement("input",{accept:"text",id:"userId"})),r.a.createElement("p",{id:"ResultText"},"RESULT:")))}}]),t}(n.Component)),We=f(Ve),qe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={facerecogition:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getAccess",value:function(){var e,t,a;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=document.getElementById("organization").value,t=document.getElementById("event").value,a=document.getElementById("passcode").value,this.props.firebase.getAllUsersDescriptions("marcoINC"),0!=e.length&&0!=t.length&&0!=a.length){n.next=7;break}return alert("Please fill out all the fields."),n.abrupt("return");case 7:return n.next=9,g.a.awrap(this.props.firebase.checkIfEventExist(e,t));case 9:if(!n.sent){n.next=21;break}return n.next=12,g.a.awrap(this.props.firebase.loginIntoEvent(e,t,a));case 12:if(!n.sent){n.next=17;break}this.setState({facerecogition:r.a.createElement(We,{children:{organization:e,event:t}})}),document.getElementById("Controls").hidden=!0,n.next=19;break;case 17:return alert("Incorrect event id or passcode"),n.abrupt("return");case 19:n.next=23;break;case 21:return alert("Unable to locate event"),n.abrupt("return");case 23:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"RECOGNIZER"),r.a.createElement("div",{id:"Controls"},r.a.createElement("p",null,"Company"),r.a.createElement("input",{id:"organization"}),r.a.createElement("p",null,"Event ID"),r.a.createElement("input",{id:"event"}),r.a.createElement("p",null,"Event Passcode"),r.a.createElement("input",{id:"passcode"}),r.a.createElement("button",{onClick:function(){return e.getAccess()}},"Access the Event")),r.a.createElement("div",{id:"FaceRecognition"},this.state.facerecogition))}}]),t}(n.Component),_e=f(qe),Ye=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e,t){var n,r;return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.name,r=t.value,a.setState(Object(F.a)({},a.state.values,Object(T.a)({},n,r)));case 2:case"end":return e.stop()}}))},a.onSubmit=function(e){var t,n,r,l,s,o,c,i,u,m,d,p,h;return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.userID,r=t.firstName,l=t.lastName,s=t.email,o=t.level,c=t.gender,i=t.age,console.log(a.state),u=a.props,m=u.organization,d=u.updateUsers,p=u.closeModal,h=u.firebase,console.log(m),e.next=6,g.a.awrap(h.updateUser(m,n,r,l,s,o,c,i));case 6:if(e.sent){e.next=10;break}return alert("User could not be added"),e.abrupt("return");case 10:d(),p("Edit");case 12:case"end":return e.stop()}}))},a.state={userID:e.user.userID,firstName:e.user.firstName,lastName:e.user.lastName,email:e.user.email,gender:e.user.sex,age:e.user.age,level:e.user.level},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.firstName,n=t.lastName,l=t.email,s=t.gender,o=t.age,c=t.level;return r.a.createElement(G.a,null,r.a.createElement(G.a.Row,null,r.a.createElement(G.a.Column,null,r.a.createElement(B.a,{noValidate:!0,onSubmit:this.onSubmit,size:"large"},r.a.createElement(B.a.Group,{width:"equal"},r.a.createElement(B.a.Input,{fluid:!0,label:"First Name",name:"firstName",type:"text",width:8,maxLength:"25",value:a,onChange:this.onChange}),r.a.createElement(B.a.Input,{fluid:!0,label:"Last Name",name:"lastName",type:"text",width:8,maxLength:"25",value:n,onChange:this.onChange}),r.a.createElement(B.a.Select,{fluid:!0,label:"Level",name:"level",width:3,value:c,options:me,onChange:this.onChange})),r.a.createElement(B.a.Group,{widths:"equal"},r.a.createElement(B.a.Input,{fluid:!0,label:"Email",name:"email",type:"text",width:8,maxLength:"40",value:l,onChange:this.onChange}),r.a.createElement(B.a.Select,{fluid:!0,label:"Gender",name:"gender",width:2,value:s,options:ue,onChange:this.onChange}),r.a.createElement(B.a.Input,{fluid:!0,label:"Age",name:"age",type:"text",value:o,maxLength:"2",width:2,onChange:function(t,a){var n=t.param;/^[\d]*$/.test(a.value)&&e.onChange(n,a)}})),r.a.createElement(V.a,{content:"Cancel",size:"large",color:"red",type:"button",icon:"cancel",labelPosition:"left",floated:"right",onClick:function(){e.setState({}),e.props.closeModal("Edit")}}),r.a.createElement(V.a,{type:"submit",content:"Submit",size:"large",color:"green",icon:"check",labelPosition:"left",floated:"left"})))))}}]),t}(r.a.Component),Je=O((function(e){return!!e}))(f(Ye)),$e=a(528),Ke=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).closeModal=function(e){switch(e){case"View":a.setState({viewUserModal:!1});break;case"Create":a.setState({viewCreateUserModal:!1});break;case"Edit":a.setState({viewEditUserModal:!1})}},a.openModal=function(e){switch(e){case"View":a.setState({viewUserModal:!0});break;case"Create":a.setState({viewCreateUserModal:!0});break;case"Edit":a.setState({viewEditUserModal:!0})}},a.state={organization:"",users:[],deleteUser:null,updateUsers:null,viewCreateUserModal:!1,viewUserModal:!1,viewEditUserModal:!1,selectedUser:{}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,r=this;return g.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,g.a.awrap(this.props.firebase.getOrganization());case 2:return e=l.sent,l.next=5,g.a.awrap(this.props.firebase.getUsersPreview(e));case 5:t=l.sent,this.props.firebase.addUser,a=this.props.firebase.deleteUser,n=function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.awrap(r.props.firebase.getUsersPreview(r.state.organization));case 2:e=t.sent,r.setState({users:e});case 4:case"end":return t.stop()}}))},this.setState({organization:e,users:t,deleteUser:a,updateUsers:n,createUserModal:!1});case 10:case"end":return l.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state,a=t.organization,n=t.users,l=t.deleteUser,s=t.updateUsers,o=t.viewEditUserModal,c=t.viewCreateUserModal,i=t.viewUserModal,u=t.selectedUser,m=r.a.createElement(oe.a,{closeIcon:!0,onClose:function(){return e.closeModal("Create")},open:c,size:"small",closeOnEscape:!0,closeOnDimmerClick:!1},r.a.createElement(oe.a.Header,{as:"h1",content:"New User"}),r.a.createElement(oe.a.Content,{content:r.a.createElement(Re,{children:{organization:a},closeModal:this.closeModal,userUpdate:s})})),d=r.a.createElement(oe.a,{closeIcon:!0,onClose:function(){return e.closeModal("Edit")},open:o,size:"tiny",closeOnEscape:!0,closeOnDimmerClick:!1},r.a.createElement(oe.a.Header,{as:"h1"},"Edit User"),r.a.createElement(oe.a.Content,null,r.a.createElement(Je,{user:u,organization:a,closeModal:this.closeModal,updateUsers:s}))),p=r.a.createElement(oe.a,{open:i,onClose:function(){return e.closeModal("View")},size:"tiny",closeOnEscape:!0,closeOnDimmerClick:!0},r.a.createElement(oe.a.Header,{as:"h1",content:"User Profile"}),r.a.createElement(oe.a.Content,null,r.a.createElement(M.a,null,r.a.createElement(G.a,null,r.a.createElement(G.a.Row,null,r.a.createElement(G.a.Column,null,r.a.createElement(L.a,{textAlign:"center",as:"h1",icon:!0},r.a.createElement(D.a,{name:"user circle"}),u.firstName," ",u.lastName),r.a.createElement($e.a,{unstackable:!0,celled:!0,singleLine:!0,striped:!0,definition:!0},r.a.createElement($e.a.Body,null,r.a.createElement($e.a.Row,null,r.a.createElement($e.a.Cell,{width:4},"User ID:"),r.a.createElement($e.a.Cell,null,u.userID)),r.a.createElement($e.a.Row,null,r.a.createElement($e.a.Cell,null,"Level:"),r.a.createElement($e.a.Cell,null,u.level)),r.a.createElement($e.a.Row,null,r.a.createElement($e.a.Cell,null,"Gender:"),r.a.createElement($e.a.Cell,null,u.sex)),r.a.createElement($e.a.Row,null,r.a.createElement($e.a.Cell,null,"Age:"),r.a.createElement($e.a.Cell,null,u.age)),r.a.createElement($e.a.Row,null,r.a.createElement($e.a.Cell,null,"Email:"),r.a.createElement($e.a.Cell,null,u.email))))))))),r.a.createElement(oe.a.Actions,null,r.a.createElement(G.a,null,r.a.createElement(G.a.Row,null,r.a.createElement(G.a.Column,null,r.a.createElement(V.a,{content:"Close",color:"grey",size:"large",floated:"left",onClick:function(){return e.closeModal("View")}}),r.a.createElement(V.a,{icon:"edit",labelPosition:"left",content:"Edit",size:"large",floated:"right",positive:!0,onClick:function(){e.openModal("Edit"),e.closeModal("View")}}))))));return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,null,r.a.createElement(G.a,{columns:1},r.a.createElement(G.a.Row,null,r.a.createElement(L.a,{as:"h1"},"User Panel")),r.a.createElement(G.a.Row,null,r.a.createElement(G.a.Column,null,r.a.createElement(V.a,{content:"Add User",icon:"add",color:"green",labelPosition:"left",floated:"right",onClick:function(){e.openModal("Create")}}))))),r.a.createElement(ce.a,{horizontal:!0},r.a.createElement(L.a,{as:"h2"},a," Users ")),r.a.createElement(je.a,{active:!n,inverted:!0},r.a.createElement(Se.a,null)),void 0===n||0===n.length?r.a.createElement(H.a,{placeholder:!0},r.a.createElement(L.a,{icon:!0},r.a.createElement(D.a,{name:"inbox",size:"large"}),r.a.createElement("p",null,"There are currently no users registered"))):r.a.createElement(M.a,null,r.a.createElement(G.a,null,r.a.createElement(G.a.Row,null,r.a.createElement(G.a.Column,null,r.a.createElement($e.a,{celled:!0,unstackable:!0},r.a.createElement($e.a.Header,null,r.a.createElement($e.a.Row,null,r.a.createElement($e.a.HeaderCell,null,"First Name "),r.a.createElement($e.a.HeaderCell,null,"Last Name  "),r.a.createElement($e.a.HeaderCell,null,"Level      "),r.a.createElement($e.a.HeaderCell,null,"View      "),r.a.createElement($e.a.HeaderCell,null,"Delete      "))),r.a.createElement($e.a.Body,null,n.map((function(t,n){return r.a.createElement($e.a.Row,{key:n},r.a.createElement($e.a.Cell,null,t.firstName),r.a.createElement($e.a.Cell,null,t.lastName),r.a.createElement($e.a.Cell,null,t.level),r.a.createElement($e.a.Cell,{collapsing:!0,textAlign:"center"},r.a.createElement(V.a,{color:"blue",icon:"info",onClick:function(){console.log(t),e.setState({selectedUser:t}),e.setState({viewUserModal:!0})}})),r.a.createElement($e.a.Cell,{collapsing:!0,textAlign:"center"},r.a.createElement(V.a,{color:"red",negative:!0,icon:"delete",onClick:function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:l(a,t.userID).then((function(){s()}));case 1:case"end":return e.stop()}}))}})))})))))))),m,p,d)}}]),t}(n.Component),Xe=O((function(e){return!!e}))(Ke),Ze=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={authUser:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.auth.onAuthStateChanged((function(t){t?e.setState({authUser:t}):e.setState({authUser:null})}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return r.a.createElement(k.Provider,{value:this.state.authUser},r.a.createElement(d.a,null,r.a.createElement("div",null,r.a.createElement(P,{authUser:this.state.authUser}),r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:R}),r.a.createElement(p.a,{path:"/signup",component:J}),r.a.createElement(p.a,{path:"/signin",component:le}),r.a.createElement(p.a,{path:"/pw-forget",component:Z}),r.a.createElement(p.a,{path:I,component:be}),r.a.createElement(p.a,{path:"/account",component:ye}),r.a.createElement(p.a,{path:"/recognizer",component:_e}),r.a.createElement(p.a,{path:"/newuser",component:Re}),r.a.createElement(p.a,{path:"/userpanel",component:Xe})))))}}]),t}(n.Component),Qe=f(Ze);s.a.render(r.a.createElement(v.Provider,{value:new C},r.a.createElement(Qe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[302,1,2]]]);
//# sourceMappingURL=main.cdba9381.chunk.js.map